<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orion Sentinel - Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%232d3748'/><circle cx='50' cy='50' r='25' fill='none' stroke='%234fd1c5' stroke-width='4'/><circle cx='50' cy='50' r='8' fill='%234fd1c5'/></svg>">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <svg viewBox="0 0 100 100" class="logo-icon">
                    <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="2"/>
                    <circle cx="50" cy="50" r="25" fill="none" stroke="currentColor" stroke-width="3"/>
                    <circle cx="50" cy="50" r="8" fill="currentColor"/>
                    <!-- Sentinel rays -->
                    <line x1="50" y1="5" x2="50" y2="20" stroke="currentColor" stroke-width="2"/>
                    <line x1="50" y1="80" x2="50" y2="95" stroke="currentColor" stroke-width="2"/>
                    <line x1="5" y1="50" x2="20" y2="50" stroke="currentColor" stroke-width="2"/>
                    <line x1="80" y1="50" x2="95" y2="50" stroke="currentColor" stroke-width="2"/>
                </svg>
                <h1>Orion Sentinel</h1>
            </div>
            <p class="tagline">Home Network Security & Privacy Dashboard</p>
        </header>

        <main>
            <section class="services-section">
                <h2>Core Services</h2>
                <div class="services-grid" id="core-services">
                    <!-- Core services will be populated here -->
                </div>
            </section>

            <section class="services-section">
                <h2>Monitoring & Observability</h2>
                <div class="services-grid" id="monitoring-services">
                    <!-- Monitoring services will be populated here -->
                </div>
            </section>

            <section class="services-section">
                <h2>Network Services</h2>
                <div class="services-grid" id="network-services">
                    <!-- Network services will be populated here -->
                </div>
            </section>

            <section class="services-section">
                <h2>Additional Services</h2>
                <div class="services-grid" id="additional-services">
                    <!-- Additional user-defined services will be populated here -->
                </div>
            </section>
        </main>

        <footer>
            <p>Orion Sentinel &copy; 2024 | <a href="https://github.com/yorgosroussakis/Orion-sentinel-installer" target="_blank" rel="noopener noreferrer">GitHub</a></p>
            <p class="version">Configuration loaded from <code>services.json</code></p>
        </footer>
    </div>

    <script>
        // Default services configuration - will be overridden by services.json
        const defaultServices = {
            core: [
                {
                    name: "Grafana",
                    description: "Visualization & Dashboards",
                    url: "http://localhost:3000",
                    icon: "chart",
                    color: "#f46800"
                },
                {
                    name: "Traefik",
                    description: "Reverse Proxy & SSL",
                    url: "http://localhost:8080",
                    icon: "network",
                    color: "#24a1c1"
                },
                {
                    name: "Authelia",
                    description: "Authentication Portal",
                    url: "http://localhost:9091",
                    icon: "shield",
                    color: "#1a73e8"
                }
            ],
            monitoring: [
                {
                    name: "Prometheus",
                    description: "Metrics Collection",
                    url: "http://localhost:9090",
                    icon: "metrics",
                    color: "#e6522c"
                },
                {
                    name: "Loki",
                    description: "Log Aggregation",
                    url: "http://localhost:3100",
                    icon: "logs",
                    color: "#f9b716"
                }
            ],
            network: [
                {
                    name: "Pi-hole",
                    description: "DNS & Ad Blocking",
                    url: "http://localhost/admin",
                    icon: "dns",
                    color: "#96060c"
                },
                {
                    name: "Suricata",
                    description: "Intrusion Detection",
                    url: "#",
                    icon: "security",
                    color: "#ff6b35"
                }
            ],
            additional: []
        };

        // SVG icons for services
        const icons = {
            chart: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 3v18h18"/>
                <path d="M18 9l-5 5-4-4-5 5"/>
            </svg>`,
            network: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="5" r="2"/>
                <circle cx="5" cy="19" r="2"/>
                <circle cx="19" cy="19" r="2"/>
                <path d="M12 7v6m-5 3l4-6m6 6l-4-6"/>
            </svg>`,
            shield: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                <path d="M9 12l2 2 4-4"/>
            </svg>`,
            metrics: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="12" width="4" height="9" rx="1"/>
                <rect x="10" y="8" width="4" height="13" rx="1"/>
                <rect x="17" y="3" width="4" height="18" rx="1"/>
            </svg>`,
            logs: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <path d="M14 2v6h6"/>
                <path d="M8 13h8"/>
                <path d="M8 17h8"/>
                <path d="M8 9h2"/>
            </svg>`,
            dns: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M2 12h20"/>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
            </svg>`,
            security: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                <path d="M12 8v4"/>
                <circle cx="12" cy="16" r="1"/>
            </svg>`,
            server: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="2" y="3" width="20" height="6" rx="1"/>
                <rect x="2" y="15" width="20" height="6" rx="1"/>
                <circle cx="6" cy="6" r="1"/>
                <circle cx="6" cy="18" r="1"/>
            </svg>`,
            cloud: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
            </svg>`,
            database: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <ellipse cx="12" cy="5" rx="9" ry="3"/>
                <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
                <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
            </svg>`,
            link: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
            </svg>`,
            home: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9,22 9,12 15,12 15,22"/>
            </svg>`,
            media: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5,3 19,12 5,21"/>
            </svg>`,
            download: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7,10 12,15 17,10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>`,
            settings: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"/>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>`
        };

        // Create a service card element
        function createServiceCard(service) {
            const card = document.createElement('a');
            card.href = service.url;
            card.className = 'service-card';
            card.target = '_blank';
            card.rel = 'noopener noreferrer';
            card.style.setProperty('--service-color', service.color || '#4fd1c5');
            
            const iconSvg = icons[service.icon] || icons.link;
            
            card.innerHTML = `
                <div class="service-icon">${iconSvg}</div>
                <div class="service-info">
                    <h3>${service.name}</h3>
                    <p>${service.description}</p>
                </div>
                <div class="service-arrow">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </div>
            `;
            
            return card;
        }

        // Populate services grid
        function populateServices(services) {
            const sections = {
                core: document.getElementById('core-services'),
                monitoring: document.getElementById('monitoring-services'),
                network: document.getElementById('network-services'),
                additional: document.getElementById('additional-services')
            };

            // Clear existing content
            Object.values(sections).forEach(section => {
                if (section) section.innerHTML = '';
            });

            // Add services to their sections
            Object.entries(services).forEach(([category, serviceList]) => {
                const section = sections[category];
                if (section && Array.isArray(serviceList)) {
                    serviceList.forEach(service => {
                        section.appendChild(createServiceCard(service));
                    });
                    
                    // Hide section if empty
                    const parentSection = section.closest('.services-section');
                    if (parentSection) {
                        parentSection.style.display = serviceList.length > 0 ? 'block' : 'none';
                    }
                }
            });
        }

        // Load services configuration
        async function loadServices() {
            try {
                const response = await fetch('services.json');
                if (response.ok) {
                    const services = await response.json();
                    populateServices(services);
                } else {
                    console.log('services.json not found, using defaults');
                    populateServices(defaultServices);
                }
            } catch (error) {
                console.log('Error loading services.json, using defaults:', error);
                populateServices(defaultServices);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', loadServices);
    </script>
</body>
</html>
